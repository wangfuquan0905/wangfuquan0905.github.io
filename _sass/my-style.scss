/* ===== First-frame theme-aware tokens ===== */
:root{
  /* Publications */
  --card-border: color-mix(in srgb, currentColor 18%, transparent);

  /* News timeline */
  --surface-bg:     color-mix(in srgb, currentColor 5%,  transparent);
  --surface-border: color-mix(in srgb, currentColor 20%, transparent);
  --divider:        color-mix(in srgb, currentColor 28%, transparent);
  --muted:          color-mix(in srgb, currentColor 55%, transparent);

  /* Robot cards */
  --surface-card-bg:     color-mix(in srgb, currentColor 5%,  transparent);
  --surface-card-shadow: rgba(0,0,0,.08);
}
@media (prefers-color-scheme: dark){
  :root{
    --card-border:        color-mix(in srgb, currentColor 22%, transparent);

    --surface-bg:         color-mix(in srgb, currentColor 7%,  transparent);
    --surface-border:     color-mix(in srgb, currentColor 26%, transparent);
    --divider:            color-mix(in srgb, currentColor 35%, transparent);
    --muted:              color-mix(in srgb, currentColor 65%, transparent);

    --surface-card-bg:     color-mix(in srgb, currentColor 7%,  transparent);
    --surface-card-shadow: rgba(0,0,0,.35);
  }
}

/* ========== Base ========== */
.dl-table a {
  @supports ((text-decoration-thickness: initial) and (text-underline-offset: initial)) {
    text-underline-offset: .8rem;
  }
  @supports not ((text-decoration-thickness: initial) and (text-underline-offset: initial)) {
    padding-bottom: .45rem;
  }
}
.dl-table .btn, .dl-table .gumroad-button { margin: 1rem 0; }

.page__title { font-size: 2rem !important; font-weight: 700 !important; margin-bottom: 1rem !important; }

.hy-push-state .loading,
.hy-push-state .loader,
.hy-push-state .hy-fade::after { display: none !important; opacity: 0 !important; visibility: hidden !important; }

/* Publications hover（theme-aware） */
.pub-item { position: relative; }
.pub-item:hover { 
  background: color-mix(in srgb, currentColor 6%, transparent); 
  box-shadow: 0 2px 8px rgba(0,0,0,.06); 
  transform: translateY(-2px); 
}
.pub-list::after { display: none !important; content: none !important; }

/* Publication venue bottom-right（theme-aware muted） */
.pub-venue {
  position: absolute; bottom: .4rem; right: .6rem;
  margin: 0; font-style: italic; font-size: .9rem; color: var(--muted);
}

/* ========== Robots (three cards, single row, 1:1, no wrapping) ========== */
/* ===== Robots: three cards in one row ===== */
.robot-grid{
  display: flex;
  justify-content: center;
  align-items: flex-start;
  gap: 1.5rem;              /* 3 张卡片之间一共 2 个 gap = 3rem */
  flex-wrap: nowrap;        /* 始终不换行 */
  overflow-x: auto;         /* 屏幕太窄时允许横向滚动 */
  -webkit-overflow-scrolling: touch;
  padding-bottom: .25rem;
}

.robot-card{
  display: block;
  flex: 0 0 auto;
  /* 关键：三等分容器宽度（减去两次间距），并限制最小/最大宽度以便缩小 */
  width: clamp(200px, calc((100% - 3rem) / 3), 320px);
  aspect-ratio: auto;
  text-decoration: none;
  color: inherit;
  border-radius: 12px;
  overflow: visible;
  background: var(--surface-card-bg);
  box-shadow: 0 2px 12px var(--surface-card-shadow);
  transition: transform .25s ease, box-shadow .25s ease;
}

.robot-card:hover{
  transform: translateY(-2px);
  box-shadow: 0 6px 18px color-mix(in srgb, currentColor 25%, transparent);
}
/* 容器稍微往下移，给 hover 留余量 */
.robot-grid{
  margin-top: 10px;      /* 往下几个像素 */
  padding-top: 6px;      /* 给 hover 上移留余量 */
  overflow-y: visible;   /* 网格自身不裁剪 */
}

/* 图片区域保持正方形；如要防变形可把 fill 改为 cover */
.robot-card .robot-media{
  aspect-ratio: 1 / 1;
}

/* 显示标题文字（之前被 display:none 了） */
.robot-card span{
  display: block;
  padding: .55rem .8rem;
  text-align: center;
  font-weight: 700;
  font-size: .95rem;
}

/* 图片方形，不裁剪（需要强行铺满可改为 cover） */
.robot-card .robot-media{ width: 100%; aspect-ratio: 1 / 1; overflow: hidden; }
.robot-card .robot-media img{
  width: 100%; height: 100%;
  object-fit: fill;  /* 如想不变形+可能裁剪，用 cover */
  display: block;
}


/* 没有任何@media去改变为竖排或换行 —— 始终单行 */

/* ========== Selection & Links (light) ========== */
a:hover { color: inherit !important; }  /* 中性 hover，不改色 */
::selection { background: #cfe3ff; color: #111; }

/* Publications（light 文本色） */
.pub-title a { color: #2a2a2a !important; text-decoration: none; }
.pub-authors, .pub-item small { color: #555 !important; }

/* ========== Dark-mode base text/bg only（不再覆写组件色） ========== */
:is(body.dark-mode, [data-theme="dark"]) { color: #eaeaea; background: #26292b; }

/* 暗色：链接用中性灰白（避免刺眼） */
:is(body.dark-mode, [data-theme="dark"]) a { color: #e6e6e6 !important; }
:is(body.dark-mode, [data-theme="dark"]) a:hover { color: #e6e6e6 !important; }

/* Sidebar text selection */
.sidebar ::selection, .sidebar__right ::selection { background: rgba(120,160,255,.35); color: #111; }
:is(body.dark-mode, [data-theme="dark"]) .sidebar ::selection,
:is(body.dark-mode, [data-theme="dark"]) .sidebar__right ::selection { background: rgba(120,160,255,.45); color: #fff; }
